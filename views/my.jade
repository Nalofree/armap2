extends layout
block content  
  #content
    // Личный кабинет
    article#kabinet.container
      // Шапка
      article.kab-info
        section.kab-head
          h2 Личный кабинет
          a.nickname.pro(href='/my')= username
        .kab-settings
          a.btn-create-object.href(href='#my-objects') создать объявление
          a.btn-setting(href='#') Настройки
          a.btn-setting(href='#') Выйти
      // Вкладки
      article.kab-tab-panel
        ul(role='tablist')
          li.active(role='presentation')
            a(href='#my-objects', aria-controls='my-objects', role='tab', data-toggle='tab') Мои объекты
          li(role='presentation')
            a(href='#kab-archive', aria-controls='kab-archive', role='tab', data-toggle='tab') Архив
          li(role='presentation')
            a(href='#kab-subscription', aria-controls='kab-subscription', role='tab', data-toggle='tab') Подписка
        .kab-search
          form
            input(type='text', placeholder='Поиск...')
            button(type='submit')
      .tab-content
        // Мои помещения и объекты
        article#my-objects.kab-objects.active.fade.in
          .kab-sorting
            .sorting-one
              p
                | Показывать:
                a.active(href='#') Объекты
                a(href='#') Объявления
            .sorting-two
              p
                | Сортировать по
                a.active(href='#') Цена
                a(href='#') Площадь
          // Создание объекта и помещений, имеет несколько шагов, которые появляются один за другим
          .kab-create-obj
            // Шаг 1
            section.kab-create-step-one
              h3 Создать новое объявление
              article
                .step-inform
                  label
                    | Введите адрес:
                    input(type='text')#objadres
                    .obj-addr-autoshow
                    input(type='hidden')#objcoords
                    span
                      | ТЦ “Рублёв”
                      a(href='#') Другой объект?
                  span или
                  select#choose-object(name="object[]") Выберите объект
                    option(selected='' value='') Выберите объект
                    - for (var i = 0; i < objects.length; i++)
                      option(value= objects[i].object_id, title= decodeURI(objects[i].object_adres))= decodeURI(objects[i].object_name)
                .step-submit
                  a.first-step.step-btn(href='#') Продолжить
            // Шаг 2
            section.kab-create-step-two
              h3 Создать новое объявление
              .step-inform
                p.step-inform-adres
                .step-object-type
                  p
                    | Выберите тип здания:
                    - for (var i = 0; i < objtypes.length; i++)
                      .radio
                        label
                          input(type='radio', name='objectType', data-title= objtypes[i].objtype_id, checked='checked')
                          div= decodeURI(objtypes[i].objtype_name)
                label
                  | Введите название:
                  input#objname(type='text')
                  span ТЦ “Рублёв”, Торговая площадь “Иванушки”, БЦ “Лисиха”
              .step-submit
                a.step-btn.back(href='#') Назад
                a.second-step.step-btn(href='#') Продолжить
            // Шаг 3
            section.kab-create-step-three
              h3 Создать новое объявление
              .step-inform
                p.step-inform-address
                  | Адрес:
                  span г. Иркутск, ул. Чехова 19
                  span Торгово-развлекательный центр “Рублёв”
                article.first-desc
                  .input-group
                    label(for='create-header') Заголовок объявления:
                    input#create-header(type='text')
                    span Не используйте слова: Срочно, Сдам, Аренда.
                  .input-group
                    label(for='create-square') Площадь:
                    input#create-square(type='text',placeholder='Циры, например 25.5')
                    span м
                    sup 2
                  .input-group
                    label(for='create-price') Цена за м2:
                    input#create-price(type='text',placeholder='Циры, например 800.2')
                    span Цена за всю площадь: 
                    span.comp-price= '0'
                    span &nbsp;руб.
                  .input-group
                    label(for='create-tel') Телефон собственника:
                    input#create-tel(type='text')
                    span
                      a(href='#') Подтвердите
                      | телефон
                  .input-group
                    label(for='create-height') Высота потолков:
                    input#create-height(type='text',placeholder='Циры, например 2.6')
                    span м
                article.second-desc
                  section.second-item
                    h4 Назначение помещения:
                    - for (var i = 0; i < meanings.length; i++)
                      .checkbox
                        label
                          input(type='checkbox', data-title= ''+meanings[i].option_id,name='meanings')
                          div= decodeURI(meanings[i].option_name)
                  section.second-item
                    h4 В арендную плату входит:
                    - for (var i = 0; i < included.length; i++)
                      .checkbox
                        label
                          input(type='checkbox', data-title= ''+included[i].option_id,name='included')
                          div= decodeURI(included[i].option_name)
                    label
                      | Другое:
                      input(type='text')
                  section.second-item
                    h4 Дополнительные услуги:
                    - for (var i = 0; i < advanced.length; i++)
                      .checkbox
                        label
                          input(type='checkbox', data-title= ''+advanced[i].option_id,name='advanced')
                          div= decodeURI(advanced[i].option_name)
                    label
                      | Другое:
                      input(type='text')
                  section.second-item
                    h4 Доступные провайдеры:
                    - for (var i = 0; i < providers.length; i++)
                      .checkbox
                        label
                          input(type='checkbox', data-title= ''+providers[i].option_id,name='providers')
                          div= decodeURI(providers[i].option_name)
                    label
                      | Другое:
                      input(type='text')
                article.add-photos
                  .add-photos-desc
                    h4 Загрузите фотографии
                    p Вы можете загрузить не более 8-ми фотографий
                    p Размер файла не должен превышать 1MB
                    p Пожалуйста не загружайте фотографии с различным текстом. бла бла бла Lorem ipsum dolor sit amet, consectetur adipisicing elit. At neque beatae consequatur, eos ipsam numquam recusandae harum quod illum veniam?
                    //input(type='file')
                    form(method='post', enctype='multipart/form-data', action='/uploadimage')
                      //| File: 
                      input(type='file', name='uplimage', multiple='multiple', id='setimages', accept="image/*,image/jpeg")
                      //input(type='submit', value='Upload')
                  .add-photos-items
                    //- .add-photos-item
                    //-   img(src='images/kabinet/1.png')
                    //-   .photos-settings
                    //-     .radio
                    //-       label
                    //-         input(type='radio', name='mainPhoto', checked='')
                    //-         | Главная
                    //-     a(href='#') Удалить
                    //- .add-photos-item
                    //-   img(src='images/kabinet/1.png')
                    //-   .photos-settings
                    //-     .radio
                    //-       label
                    //-         input(type='radio', name='mainPhoto', checked='')
                    //-         | Главная
                    //-     a(href='#') Удалить
                    //- .add-photos-item
                    //-   img(src='images/kabinet/1.png')
                    //-   .photos-settings
                    //-     .radio
                    //-       label
                    //-         input(type='radio', name='mainPhoto', checked='')
                    //-         | Главная
                    //-     a(href='#') Удалить
              .step-submit
                a.step-btn(href='#') Проверить объявление
                a.third-step.step-btn(href='#') Опубликовать
                a.back(href='#') Назад
            // Шаг 4
            section.kab-create-step-complite
              h3 Готово
              p
                | Спасибо! Ваше объявление отправлено на модерацию, и в скором времени будет опубликовано на сайте.
              a.step-btn(href='#') Спасибо
          // Объекты и помещения
          .kab-items
            - for (var i = 0; i < objects.length; i++)
              article.kab-item
                section.kab-item-info
                  .kab-item-img
                    - var cover = objects[i].object_cover ? objects[i].object_cover : "images/search/result-big.png";
                    img(src= cover)
                  .kab-item-desc
                    section.kab-item-header
                      h4.nowrap-text= objects[i].object_name
                      - var adres = decodeURI(objects[i].object_adres).split(',');
                      - adres.splice(0,2);
                      p.nowrap-text= adres
                    section.kab-item-change
                      .kab-item-edit
                        a(href='#', class='del-obj', data-title=objects[i].object_id) Удалить
                        span |
                        a(href='#', class='edit-obj', data-title=objects[i].object_id) Редактировать
                      .kab-item-create
                        a(href= ""+objects[i].object_id) + Добавить помещение
                  //- .kab-item-last
                  //-   p Последнее измененное:
                  //-   a.last-object(href='#')
                  //-     .last-object-img
                  //-       img(src='images/search/result-img.png')
                  //-     .last-object-desc
                  //-       h4= decodeURI(offices[0].office_name) ? decodeURI(offices[0].office_name) : 'Error!'
                  //-       p= decodeURI(objects[i].object_name) ? decodeURI(objects[i].object_name) : 'Error!'
                  //-       section
                  //-         .last-object-price
                  //-           p
                  //-             | Цена за м
                  //-             sup 2
                  //-             | : 
                  //-             br
                  //-             span= offices[0].office_subprice +' р.'
                  //-         .last-object-square
                  //-           p
                  //-             | Площадь: 
                  //-             br
                  //-             span= offices[0].office_area +' м'
                  //-               sup 2
                  span.rooms-show
                // Таблица помещений
                section.kab-item-table
                  table
                    tbody
                      tr
                        //- td
                        //- td Имя
                        //- td Площадь
                        //- td
                        //- td Статус
                        //- td
                      - for (var j = 0; j < offices.length; j++)
                        - if (offices[j].office_object == objects[i].object_id)
                          tr
                            td.table-date= offices[j].office_create
                            td.table-name
                              a.nowrap-text(href='#')= decodeURI(offices[j].office_name)
                              - if (offices[j].office_publish == 0)
                                span.status.wait Ожидает модерации
                              - else
                                span.status.published Опубликовано
                            td.table-time Осталось 7 дней
                            td.table-square= offices[j].office_area+'кв. м'
                            td.table-price= offices[j].office_area*offices[j].office_subprice + ' руб.'
                            td.table-edit
                              a.table-edit-menu-show(href='javascript: void(0);') Редактировать
                              ul.table-edit-menu
                                li
                                  a(href='#') Изменить
                                li
                                  a(href='#') Снять с публикации
                                li
                                  a(href='#', class='del-ofc', data-title=offices[j].office_id) Удалить

            //- // Пустой объект имеет класс empty
            //- article.kab-item.empty
            //-   section.kab-item-info
            //-     .kab-item-img
            //-       img(src='images/search/result-big.png')
            //-     section
            //-       .kab-item-desc
            //-         section.kab-item-header
            //-           h4.nowrap-text ТЦ “Рублёв”
            //-           p.nowrap-text г. Иркутск, ул. Чехова 19
            //-         section.kab-item-change
            //-           .kab-item-edit
            //-             a(href='#') Удалить
            //-             span |
            //-             a(href='#') Редактировать
            //-       .kab-item-create
            //-         p Помещений нет
            //-         a(href='#') + Добавить помещение
        // Вкладка архив, здесь должны быть удаленные помещения и объекты
        article#kab-archive.fade
        // Вкладка подписки, здесь хз че;)
        article#kab-subscription.fade
